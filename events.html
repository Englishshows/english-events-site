<script>
  fetch('events.json')
    .then(response => response.json())
    .then(data => {
      const eventList = document.getElementById('event-list');
      eventList.innerHTML = '';

      // Group events by date
      const grouped = {};
      data.events.forEach(event => {
        const date = new Date(event.date).toDateString(); // e.g., "Sun Jul 20 2025"
        if (!grouped[date]) grouped[date] = [];
        grouped[date].push(event);
      });

      // Sort dates
      const sortedDates = Object.keys(grouped).sort((a, b) => new Date(a) - new Date(b));

      // Render each date group
      sortedDates.forEach(date => {
        const dayHeader = document.createElement('h2');
        dayHeader.textContent = new Date(date).toLocaleDateString(undefined, {
          weekday: 'long',
          year: 'numeric',
          month: 'long',
          day: 'numeric'
        });
        eventList.appendChild(dayHeader);

        grouped[date].forEach(event => {
          const div = document.createElement('div');
          div.className = 'event';
          div.innerHTML = `
            <h3>${event.title}</h3>
            <p><strong>Venue:</strong> ${event.venue}</p>
            <p>${event.description}</p>
            <p><a href="${event.link}" target="_blank">More info</a></p>
          `;
          eventList.appendChild(div);
        });

        // Optional spacer
        const spacer = document.createElement('hr');
        eventList.appendChild(spacer);
      });
    })
    .catch(error => {
      document.getElementById('event-list').innerHTML = '<p>Error loading events.</p>';
      console.error(error);
    });
</script>

